import{r as u,j as t,s as p}from"./app-Cb6N8Pr9.js";import{B as g}from"./button-CXnLGtX-.js";import{I as f}from"./input-DIAWqMx1.js";import{M as E}from"./modal-D9m65fZF.js";import{u as q,g as v}from"./categories-thunk-CmQMWyS2.js";import{u as I}from"./index.esm-TtWAzZ-z.js";import{S as y}from"./sweetalert2.esm.all-EtYCW2yB.js";import"./index-Bcr0Drpf.js";import"./transition-CT7hBnhE.js";import"./use-server-handoff-complete-f9ZIPYmc.js";function z({data:r}){var m,c;const{register:i,handleSubmit:x,setError:h,reset:s,formState:{errors:n,isSubmitting:b}}=I({defaultValues:{category_id:r.category_id,name:r.name}}),[a,o]=u.useState(!1);u.useEffect(()=>{a&&s({category_id:r.category_id,name:r.name})},[a,r,s]);const S=async _=>{var l,d;try{await p.dispatch(q({id:r.id,..._})),await p.dispatch(v()),y.fire({icon:"success",title:"Category updated",showConfirmButton:!1,timer:1500}),s(),o(!1)}catch(e){if((d=(l=e==null?void 0:e.response)==null?void 0:l.data)!=null&&d.errors){const j=e.response.data.errors;Object.entries(j).forEach(([C,w])=>{h(C,{type:"manual",message:w[0]})})}else y.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return t.jsxs("div",{children:[t.jsx(g,{onClick:()=>o(!0),variant:"outline",type:"button",className:"border-red-500 text-red-500",children:"Update"}),t.jsx(E,{onClose:()=>{s(),o(!1)},isOpen:a,title:"Update Category",children:t.jsxs("form",{onSubmit:x(S),className:"flex w-full flex-col gap-5",children:[t.jsx(f,{label:"Category ID",name:"category_id",register:i("category_id",{required:"Category ID is required"}),type:"text",error:(m=n.category_id)==null?void 0:m.message}),t.jsx(f,{label:"Category Name",name:"name",register:i("name",{required:"Category Name is required"}),type:"text",error:(c=n.name)==null?void 0:c.message}),t.jsx(g,{loading:b,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{z as default};
