import{r as b,j as t,s as n}from"./app-Cb6N8Pr9.js";import{B as m}from"./button-CXnLGtX-.js";import{I as j}from"./input-DIAWqMx1.js";import{M as w}from"./modal-D9m65fZF.js";import{c as E,g as Y}from"./categories-thunk-CmQMWyS2.js";import{h as k}from"./moment-G82_0lEo.js";import{u as v}from"./index.esm-TtWAzZ-z.js";import{S as c}from"./sweetalert2.esm.all-EtYCW2yB.js";import"./index-Bcr0Drpf.js";import"./transition-CT7hBnhE.js";import"./use-server-handoff-complete-f9ZIPYmc.js";function R(){var s;const{register:l,handleSubmit:p,setError:u,reset:f,formState:{errors:g,isSubmitting:d}}=v(),[h,r]=b.useState(!1),x=async o=>{var a,i;console.log("Form Data:",o);try{await n.dispatch(E({...o,category_id:`CGY${k().format("MMDDYYYYHHmmss")}`})),await n.dispatch(Y()),c.fire({icon:"success",title:"Your work has been saved",showConfirmButton:!1,timer:1500}),f(),r(!1)}catch(e){if((i=(a=e==null?void 0:e.response)==null?void 0:a.data)!=null&&i.errors){const y=e.response.data.errors;Object.entries(y).forEach(([C,S])=>{u(C,{type:"manual",message:S[0]})})}else c.fire({icon:"error",title:"Unexpected Error",text:(e==null?void 0:e.message)||"Something went wrong"})}};return t.jsxs("div",{children:[t.jsx(m,{onClick:()=>r(!0),variant:"danger",type:"button",children:"Create Category"}),t.jsx(w,{onClose:()=>r(!1),isOpen:h,title:"Create Category",children:t.jsxs("form",{onSubmit:p(x),className:"flex w-full flex-col gap-5",children:[t.jsx(j,{label:"Category Name",name:"name",register:l("name",{required:"Category Name is required"}),type:"text",error:(s=g.name)==null?void 0:s.message}),t.jsx(m,{loading:d,variant:"danger",type:"submit",children:"Submit"})]})})]})}export{R as default};
